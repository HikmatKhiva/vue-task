<!-- <template>
  <input
    :value="formattedDate"
    @input="handleInput"
    :placeholder="mask"
    type="text"
  />
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue';
import dayjs from 'dayjs';

const props = defineProps({
  modelValue: {
    type: String,
    required: true,
  },
});

const emit = defineEmits(['update:modelValue']);

const locale = ref(navigator.language);
const mask = computed(() => (locale.value === 'en_US' ? 'MM/DD/YYYY' : 'DD/MM/YYYY'));
const formattedDate = computed(() => format(props.modelValue, 'MM/DD/YYYY'));

const handleInput = (event: InputEvent) => {
  const target = event.target as HTMLInputElement;
  const userInput = target.value;
  const parsedDate = parse(userInput, mask.value, new Date());

  if (parsedDate.isValid()) {
    emit('update:modelValue', format(parsedDate, 'YYYY-MM-DD'));
  }
};

onMounted(() => {
  // Initialize the input value with the formatted date
  (document.querySelector('input') as HTMLInputElement).value = formattedDate.value;
});
</script> -->
